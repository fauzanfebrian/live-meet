const _0x198f29=_0xc664;function _0x2187(){const _0x222b30=['innerText','user-disconnected','5528945HgYpjM','.wrapper-video','srcObject','7POnIld','button','connections','screenshare','remove','wrapper-controller','10CqOuFb','className','getTracks','18478MKubur','peer','wrapper-video','setUserSpeaker(this)','div','controls','#messages\x20.input-message\x20button','2530014eXlfyN','12jJUihs','querySelector','split','call','room-full','replace','addEventListener','muted','52xMwcUA','append','closest','speaker','disable','video','my-video','onclick','#messages\x20.input-message\x20input','forEach','location','close','answer','loadedmetadata','1713888rKqVfs','includes','21231HSwjOi','#messages','nodeName','mediaDevices','getElementById','2056zXTJwq','#messages\x20.toggle','firstElementChild','stream','click','user-connected','createElement','observe','closed','/room/anonym-room','toggle','value','VIDEO','Messages\x20(\x201\x20)\x20>','4iJspra','kind','find','video-grid','michropone','childNodes','join-room','58002529dGTrAr','enabled','classList','emit','\x20)\x20>','roomauthor','user','length','10521159zzlgoj','setAttribute','message'];_0x2187=function(){return _0x222b30;};return _0x2187();}(function(_0x4f3c83,_0x63f389){const _0x26db66=_0xc664,_0x20bd18=_0x4f3c83();while(!![]){try{const _0xf4b798=-parseInt(_0x26db66(0x19a))/0x1*(parseInt(_0x26db66(0x1aa))/0x2)+-parseInt(_0x26db66(0x1a1))/0x3+-parseInt(_0x26db66(0x1cd))/0x4*(parseInt(_0x26db66(0x18e))/0x5)+parseInt(_0x26db66(0x1b8))/0x6*(parseInt(_0x26db66(0x191))/0x7)+-parseInt(_0x26db66(0x1bf))/0x8*(parseInt(_0x26db66(0x1ba))/0x9)+parseInt(_0x26db66(0x197))/0xa*(-parseInt(_0x26db66(0x189))/0xb)+parseInt(_0x26db66(0x1a2))/0xc*(parseInt(_0x26db66(0x181))/0xd);if(_0xf4b798===_0x63f389)break;else _0x20bd18['push'](_0x20bd18['shift']());}catch(_0x5b404a){_0x20bd18['push'](_0x20bd18['shift']());}}}(_0x2187,0xb8596));const peerConfig={'config':{'iceServers':iceServers}},socket=io('/'),myPeer=new Peer(ISAUTHOR?(_0x198f29(0x186)+ROOM_ID)[_0x198f29(0x1a7)](/[^a-z0-9]/gi,''):undefined,peerConfig),videoGrid=document[_0x198f29(0x1be)](_0x198f29(0x1d0)),messages=document[_0x198f29(0x1a3)](_0x198f29(0x1bb)),toggleMessageOpen=document[_0x198f29(0x1a3)](_0x198f29(0x1c0)),toggleMessage=document[_0x198f29(0x1a3)]('.toggle-wrapper\x20.message'),messageContent=document[_0x198f29(0x1a3)]('#messages\x20.messages-content'),messageInput=document['querySelector'](_0x198f29(0x1b2)),messageButton=document[_0x198f29(0x1a3)](_0x198f29(0x1a0));let myStream;const myVideo=document[_0x198f29(0x1c5)](_0x198f29(0x1af)),userMediaOpt={'video':{'frameRate':0x1e,'facingMode':_0x198f29(0x187)},'audio':!![]};myVideo[_0x198f29(0x1a9)]=!![];function connectToNewUser(_0x1b75f6,_0x1bb679,_0x7b8327){const _0x2c3b67=_0x198f29,_0x23bc77=(_0x7b8327||myPeer)[_0x2c3b67(0x1a5)](_0x1b75f6,_0x1bb679),_0x3c31ff=document[_0x2c3b67(0x1c5)]('video');_0x23bc77['on'](_0x2c3b67(0x1c2),_0x3269c0=>{const _0x3ff04f=_0x2c3b67,_0x10591e=document[_0x3ff04f(0x1be)](_0x1b75f6);if(_0x10591e)return;addVideoStream(_0x3c31ff,_0x3269c0,_0x1b75f6);}),_0x23bc77['on'](_0x2c3b67(0x1b5),()=>handleCallClosed(_0x23bc77[_0x2c3b67(0x19b)]));}function _0xc664(_0x46fd55,_0x1f0421){const _0x218766=_0x2187();return _0xc664=function(_0xc664b5,_0x24d916){_0xc664b5=_0xc664b5-0x181;let _0x21bc60=_0x218766[_0xc664b5];return _0x21bc60;},_0xc664(_0x46fd55,_0x1f0421);}function setUserSpeaker(_0x29e59b){const _0x483d0a=_0x198f29,_0x3644ed=_0x29e59b[_0x483d0a(0x1ac)](_0x483d0a(0x18f)),_0x581daa=_0x3644ed[_0x483d0a(0x1a3)](_0x483d0a(0x1af));_0x29e59b[_0x483d0a(0x183)]['toggle'](_0x483d0a(0x1ae));if(_0x3644ed['id']!==_0x483d0a(0x1b0))return _0x581daa[_0x483d0a(0x1a9)]=!_0x581daa[_0x483d0a(0x1a9)];_0x581daa['michropone']=_0x581daa[_0x483d0a(0x1d1)]===undefined?!![]:!_0x581daa[_0x483d0a(0x1d1)];const _0x2a938a=myStream[_0x483d0a(0x199)]()[_0x483d0a(0x1cf)](_0x2e38cc=>_0x2e38cc[_0x483d0a(0x1ce)]==='audio');_0x2a938a[_0x483d0a(0x182)]=!_0x581daa[_0x483d0a(0x1d1)];}async function addVideoStream(_0xd6ffa6,_0x4b2fc2,_0x531e69){const _0x552157=_0x198f29,_0x1bceac=document[_0x552157(0x1c5)](_0x552157(0x19e)),_0x1e78f9=document['createElement'](_0x552157(0x19e)),_0x240948=document['createElement'](_0x552157(0x192)),_0x48a9d2=_0x531e69||_0x552157(0x1b0);_0x1bceac[_0x552157(0x198)]=_0x552157(0x19c),_0x1e78f9['className']=_0x552157(0x196),_0x240948[_0x552157(0x198)]=_0x48a9d2===_0x552157(0x1b0)?'mic':_0x552157(0x1ad),_0x240948[_0x552157(0x18a)](_0x552157(0x1b1),_0x552157(0x19d)),_0x1bceac['setAttribute']('id',''+_0x48a9d2),_0xd6ffa6[_0x552157(0x190)]=_0x4b2fc2,_0xd6ffa6[_0x552157(0x1a8)](_0x552157(0x1b7),()=>_0xd6ffa6['play']()),_0xd6ffa6[_0x552157(0x190)][_0x552157(0x199)]()[_0x552157(0x1b3)](_0x4d8768=>{_0x4d8768['onended']=()=>console['log']('ENDED');}),_0x1e78f9['append'](_0x240948),_0x1bceac['append'](_0xd6ffa6),_0x1bceac['append'](_0x1e78f9);if(_0x48a9d2?.[_0x552157(0x1b9)]?.(_0x552157(0x194)))_0xd6ffa6['setAttribute'](_0x552157(0x19f),!![]),videoGrid['insertBefore'](_0x1bceac,videoGrid[_0x552157(0x1c1)]);else videoGrid[_0x552157(0x1ab)](_0x1bceac);return _0x1bceac;}const handleCallClosed=_0x5807dd=>{const _0x2a4a68=_0x198f29;myPeer[_0x2a4a68(0x193)][_0x5807dd]?.[0x0]?.[_0x2a4a68(0x1b5)]();const _0x2ee80f=document['getElementById'](_0x5807dd);_0x2ee80f?.[_0x2a4a68(0x195)]?.();},toggleMessageHandler=()=>{const _0x39e5c5=_0x198f29;messages[_0x39e5c5(0x183)][_0x39e5c5(0x1c9)](_0x39e5c5(0x1c7)),toggleMessage[_0x39e5c5(0x18c)]='Messages';};function roomFullHandler(){const _0x146dcd=_0x198f29;alert('the\x20room\x20is\x20full'),window[_0x146dcd(0x1b4)]=_0x146dcd(0x1c8);}async function init(){const _0x9c8ea0=_0x198f29,_0x2b9d3c=await navigator[_0x9c8ea0(0x1bd)]['getUserMedia'](userMediaOpt);myStream=_0x2b9d3c,addVideoStream(myVideo,_0x2b9d3c),myPeer['on']('call',_0x9e067c=>{const _0x592b86=_0x9c8ea0;_0x9e067c[_0x592b86(0x1b6)](_0x2b9d3c);const _0x588a71=document['createElement'](_0x592b86(0x1af));_0x9e067c['on'](_0x592b86(0x1c2),_0x25318c=>{const _0xd90ccd=_0x592b86,_0x2abf40=document[_0xd90ccd(0x1be)](_0x9e067c[_0xd90ccd(0x19b)]);if(_0x2abf40)return;addVideoStream(_0x588a71,_0x25318c,_0x9e067c[_0xd90ccd(0x19b)]);}),_0x9e067c['on']('close',()=>handleCallClosed(_0x9e067c['peer']));}),socket['on'](_0x9c8ea0(0x1a6),roomFullHandler),socket['on'](_0x9c8ea0(0x1c4),_0x392ffc=>connectToNewUser(_0x392ffc,_0x2b9d3c)),socket['on'](_0x9c8ea0(0x18d),(_0x4bc8a2,_0x3a0476)=>{const _0x17ce0b=_0x9c8ea0;handleCallClosed(_0x4bc8a2),_0x3a0476&&(alert('The\x20author\x20of\x20this\x20room\x20has\x20leaved,\x20this\x20room\x20will\x20be\x20destroyed\x20on\x205\x20seconds'),setTimeout(()=>window[_0x17ce0b(0x1b4)]='/',0x1388)),videoGrid[_0x17ce0b(0x1c1)]['id']['includes'](_0x17ce0b(0x194))&&videoGrid[_0x17ce0b(0x1c1)][_0x17ce0b(0x195)]();}),socket['on'](_0x9c8ea0(0x18b),_0x4494d0=>{const _0x250963=_0x9c8ea0,_0x47a408=document[_0x250963(0x1c5)]('p');_0x47a408['innerText']=_0x4494d0,messageContent[_0x250963(0x1ab)](_0x47a408);const _0xf44dcd=+toggleMessage[_0x250963(0x18c)]?.[_0x250963(0x1a4)]?.('(\x20')?.[0x1]?.[_0x250963(0x1a4)]?.('\x20)')?.[0x0]||undefined;if(_0xf44dcd===undefined)toggleMessage[_0x250963(0x18c)]=_0x250963(0x1cc);else toggleMessage['innerText']='Messages\x20(\x20'+(_0xf44dcd+0x1)+_0x250963(0x185);}),myPeer['on']('open',_0x23dab4=>socket[_0x9c8ea0(0x184)](_0x9c8ea0(0x1d3),ROOM_ID,myPeer['id']));}new MutationObserver(_0x33d74e=>{const _0x4eb4aa=_0x198f29,_0x125a95=videoGrid[_0x4eb4aa(0x1d2)];_0x125a95?.['forEach']?.(_0x1cf89e=>_0x1cf89e[_0x4eb4aa(0x1c1)][_0x4eb4aa(0x1bc)]!==_0x4eb4aa(0x1cb)&&_0x1cf89e[_0x4eb4aa(0x195)]());})[_0x198f29(0x1c6)](videoGrid,{'childList':!![]}),messageButton[_0x198f29(0x1a8)](_0x198f29(0x1c3),()=>{const _0x3548e8=_0x198f29;if(messageInput[_0x3548e8(0x1ca)][_0x3548e8(0x188)]<0x1)return;socket[_0x3548e8(0x184)](_0x3548e8(0x18b),messageInput[_0x3548e8(0x1ca)]);const _0x14f1f3=document[_0x3548e8(0x1c5)]('p');_0x14f1f3[_0x3548e8(0x18c)]=messageInput[_0x3548e8(0x1ca)],messageContent[_0x3548e8(0x1ab)](_0x14f1f3),messageInput['value']='';}),toggleMessageOpen['addEventListener'](_0x198f29(0x1c3),toggleMessageHandler),toggleMessage[_0x198f29(0x1a8)]('click',toggleMessageHandler),init();